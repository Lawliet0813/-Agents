# ç ”ç©¶ç”Ÿå°ˆå±¬ AGENT é–‹ç™¼ç¸½çµ

## âœ… å·²å®ŒæˆåŠŸèƒ½

### 1. æ ¸å¿ƒæ¶æ§‹ âœ“

```
graduate_agent/
â”œâ”€â”€ moodle/              # Moodle ç›¸é—œåŠŸèƒ½
â”‚   â”œâ”€â”€ scraper.py       # èª²ç¨‹çˆ¬èŸ²ï¼ˆç™»å…¥ã€èª²ç¨‹åˆ—è¡¨ã€å…§å®¹è§£æï¼‰
â”‚   â””â”€â”€ downloader.py    # æª”æ¡ˆä¸‹è¼‰å™¨ï¼ˆPDFã€PPT ç­‰ï¼‰
â”œâ”€â”€ notion/              # Notion æ•´åˆ
â”‚   â”œâ”€â”€ client.py        # Notion API å®¢æˆ¶ç«¯
â”‚   â””â”€â”€ sync.py          # èª²ç¨‹åŒæ­¥åŠŸèƒ½
â”œâ”€â”€ utils/               # å·¥å…·æ¨¡çµ„
â”‚   â””â”€â”€ config.py        # é…ç½®ç®¡ç†
â”œâ”€â”€ mcp/                 # MCP Serverï¼ˆé ç•™ï¼‰
â”œâ”€â”€ ai/                  # AI åŠŸèƒ½ï¼ˆé ç•™ï¼‰
â”œâ”€â”€ config/              # é…ç½®æª”æ¡ˆ
â”‚   â””â”€â”€ config.example.yaml
â”œâ”€â”€ data/                # è³‡æ–™ç›®éŒ„
â”‚   â”œâ”€â”€ cache/           # å¿«å–
â”‚   â””â”€â”€ downloads/       # ä¸‹è¼‰çš„æª”æ¡ˆ
â””â”€â”€ main.py              # ä¸»ç¨‹å¼ CLI
```

### 2. Moodle çˆ¬èŸ²åŠŸèƒ½ âœ“

**ç‰¹é»ï¼š**
- âœ… æ”¯æ´ SSO å–®ä¸€ç™»å…¥ï¼ˆæ”¿å¤§ Moodleï¼‰
- âœ… è‡ªå‹•ç™»å…¥ä¸¦ç¶­æŒ session
- âœ… ç²å–æ‰€æœ‰è¨»å†Šèª²ç¨‹
- âœ… è§£æèª²ç¨‹çµæ§‹ï¼ˆç« ç¯€ã€æ´»å‹•ã€è³‡æºï¼‰
- âœ… è¼¸å‡ºçµæ§‹åŒ– JSON è³‡æ–™
- âœ… Context Manager æ”¯æ´ï¼ˆè‡ªå‹•æ¸…ç†è³‡æºï¼‰

**ä½¿ç”¨æ–¹å¼ï¼š**
```python
with MoodleScraper(base_url, username, password) as scraper:
    data = scraper.scrape_all()
    scraper.save_to_json(data, "moodle_courses.json")
```

### 3. æª”æ¡ˆä¸‹è¼‰å™¨ âœ“

**ç‰¹é»ï¼š**
- âœ… è‡ªå‹•è­˜åˆ¥ä¸¦ä¸‹è¼‰å„é¡æª”æ¡ˆï¼ˆPDFã€PPTã€Word ç­‰ï¼‰
- âœ… æŒ‰èª²ç¨‹å’Œé€±æ¬¡çµ„ç¹”æª”æ¡ˆçµæ§‹
- âœ… é¿å…é‡è¤‡ä¸‹è¼‰ï¼ˆæª¢æŸ¥å·²å­˜åœ¨æª”æ¡ˆï¼‰
- âœ… æ¸…ç†æª”æ¡ˆåç¨±ï¼ˆç§»é™¤ä¸åˆæ³•å­—å…ƒï¼‰
- âœ… ä¸‹è¼‰é€²åº¦é¡¯ç¤ºå’Œçµ±è¨ˆ

**è¼¸å‡ºçµæ§‹ï¼š**
```
downloads/
â”œâ”€â”€ é ˜å°èˆ‡ç®¡ç†å°ˆé¡Œ/
â”‚   â”œâ”€â”€ Week01/
â”‚   â”œâ”€â”€ Week02/
â”‚   â””â”€â”€ ...
â””â”€â”€ è·¨åŸŸæ²»ç†/
    â”œâ”€â”€ Week01/
    â””â”€â”€ ...
```

### 4. Notion æ•´åˆ âœ“

**ç‰¹é»ï¼š**
- âœ… å‰µå»ºèª²ç¨‹è³‡æ–™åº«
- âœ… åŒæ­¥èª²ç¨‹è³‡è¨Šåˆ° Notion
- âœ… ç‚ºæ¯é–€èª²ç¨‹å‰µå»ºè©³ç´°é é¢
- âœ… åŒæ­¥é€±æ¬¡å…§å®¹å’Œè³‡æºé€£çµ
- âœ… æ›´æ–°å·²å­˜åœ¨çš„èª²ç¨‹é é¢
- âœ… å€å¡Šå»ºæ§‹è¼”åŠ©å‡½æ•¸ï¼ˆæ¨™é¡Œã€æ®µè½ã€é€£çµç­‰ï¼‰

**Notion è³‡æ–™çµæ§‹ï¼š**
```
ğŸ“š ç ”ç©¶ç”Ÿèª²ç¨‹ç®¡ç†ï¼ˆDatabaseï¼‰
â”œâ”€â”€ ğŸ“ é ˜å°èˆ‡ç®¡ç†å°ˆé¡Œ
â”‚   â”œâ”€â”€ ğŸ“‹ èª²ç¨‹æ¦‚è¦½
â”‚   â”œâ”€â”€ ğŸ“š èª²ç¨‹å…§å®¹
â”‚   â”‚   â”œâ”€â”€ Week 01
â”‚   â”‚   â”œâ”€â”€ Week 02
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ è³‡æºé€£çµ
â””â”€â”€ ğŸ“ è·¨åŸŸæ²»ç†
    â””â”€â”€ ...
```

### 5. é…ç½®ç®¡ç†ç³»çµ± âœ“

**ç‰¹é»ï¼š**
- âœ… YAML é…ç½®æª”æ¡ˆæ”¯æ´
- âœ… ç’°å¢ƒè®Šæ•¸æ”¯æ´ï¼ˆå®‰å…¨å„²å­˜å¯†ç¢¼ï¼‰
- âœ… å¤šç¨®é…ç½®ä¾†æºï¼ˆæª”æ¡ˆ > ç’°å¢ƒè®Šæ•¸ï¼‰
- âœ… é…ç½®é©—è­‰
- âœ… ç¯„ä¾‹é…ç½®è‡ªå‹•ç”Ÿæˆ

**è¨­å®šæ–¹å¼ï¼š**
```yaml
# config.yaml
moodle:
  base_url: 'https://moodle45.nccu.edu.tw'
  username: 'å­¸è™Ÿ'  # æˆ–ä½¿ç”¨ $MOODLE_USERNAME
  password: 'å¯†ç¢¼'  # æˆ–ä½¿ç”¨ $MOODLE_PASSWORD
  download_dir: 'graduate_agent/data/downloads'
  headless: true

notion:
  token: 'secret_...'  # æˆ–ä½¿ç”¨ $NOTION_TOKEN
  database_id: null
```

### 6. å‘½ä»¤åˆ—ä»‹é¢ (CLI) âœ“

**å‘½ä»¤ï¼š**
```bash
# çˆ¬å–èª²ç¨‹è³‡æ–™
python -m graduate_agent.main scrape

# ä¸‹è¼‰èª²ç¨‹è³‡æº
python -m graduate_agent.main download

# åŒæ­¥åˆ° Notion
python -m graduate_agent.main sync --parent-page-id <ID>

# åŸ·è¡Œå®Œæ•´æµç¨‹
python -m graduate_agent.main full --parent-page-id <ID>
```

### 7. æ–‡ä»¶èˆ‡å·¥å…· âœ“

**å·²å‰µå»ºçš„æ–‡ä»¶ï¼š**
- âœ… `GRADUATE_AGENT_README.md` - è©³ç´°ä½¿ç”¨èªªæ˜
- âœ… `GRADUATE_AGENT_SUMMARY.md` - é–‹ç™¼ç¸½çµï¼ˆæœ¬æ–‡ä»¶ï¼‰
- âœ… `config.example.yaml` - é…ç½®ç¯„ä¾‹
- âœ… `.env.example` - ç’°å¢ƒè®Šæ•¸ç¯„ä¾‹
- âœ… `setup_graduate_agent.sh` - å¿«é€Ÿè¨­å®šè…³æœ¬
- âœ… `test_graduate_agent.py` - æ¨¡çµ„æ¸¬è©¦è…³æœ¬

**å·¥å…·è…³æœ¬ï¼š**
- âœ… è‡ªå‹•åŒ–è¨­å®šè…³æœ¬ï¼ˆå‰µå»ºç’°å¢ƒã€å®‰è£ä¾è³´ï¼‰
- âœ… æ¸¬è©¦è…³æœ¬ï¼ˆé©—è­‰å®‰è£å’Œæ¨¡çµ„ï¼‰

## ğŸ“Š ç¨‹å¼ç¢¼çµ±è¨ˆ

- **Python æª”æ¡ˆ**: 13 å€‹
- **ç¸½è¡Œæ•¸**: ~1500+ è¡Œ
- **æ¨¡çµ„**: 5 å€‹ï¼ˆmoodle, notion, utils, mcp, aiï¼‰
- **é…ç½®æª”æ¡ˆ**: 2 å€‹ï¼ˆYAML, ENVï¼‰

## ğŸ¯ ä¸‹ä¸€éšæ®µé–‹ç™¼å»ºè­°

### Phase 2: åŠŸèƒ½å¢å¼·

1. **ä½œæ¥­ç®¡ç†ç³»çµ±**
   - [ ] è§£æä½œæ¥­æˆªæ­¢æ—¥æœŸ
   - [ ] æå–ä½œæ¥­è¦æ±‚
   - [ ] è¿½è¹¤ç¹³äº¤ç‹€æ…‹
   - [ ] è‡ªå‹•æé†’åŠŸèƒ½

2. **å…§å®¹å¢å¼·**
   - [ ] ä¸‹è¼‰å½±ç‰‡é€£çµ
   - [ ] æå–è«–å£‡è¨è«–
   - [ ] æ¸¬é©—é¡Œç›®æŠ“å–ï¼ˆå¦‚æœå¯è¨ªå•ï¼‰

3. **Notion é€²éšåŠŸèƒ½**
   - [ ] ä½œæ¥­è³‡æ–™åº«ï¼ˆå«æˆªæ­¢æ—¥æœŸï¼‰
   - [ ] å­¸ç¿’é€²åº¦è¿½è¹¤
   - [ ] è‡ªå‹•æ¨™è¨˜å®Œæˆç‹€æ…‹
   - [ ] Calendar æ•´åˆ

### Phase 3: MCP Server

4. **MCP Server é–‹ç™¼**
   ```
   Tools:
   - get_courses()
   - get_course_content(course_id)
   - download_resource(resource_url)
   - get_assignments(course_id)
   - search_content(keyword)

   Resources:
   - moodle://courses
   - moodle://course/{id}
   - moodle://assignments
   ```

5. **å¿«å–æ©Ÿåˆ¶**
   - [ ] SQLite è³‡æ–™åº«
   - [ ] å¢é‡æ›´æ–°
   - [ ] éæœŸæ™‚é–“ç®¡ç†

### Phase 4: AI å¢å¼·

6. **AI å­¸ç¿’åŠ©æ‰‹**
   - [ ] è‡ªå‹•æ‘˜è¦èª²ç¨‹ PDF
   - [ ] æå–é‡é»æ¦‚å¿µ
   - [ ] åŸºæ–¼èª²ç¨‹å…§å®¹çš„ Q&A
   - [ ] ä½œæ¥­å”åŠ©ï¼ˆåˆ†æè¦æ±‚ã€æä¾›å»ºè­°ï¼‰

7. **é€²åº¦è¿½è¹¤**
   - [ ] è¦–è¦ºåŒ–å­¸ç¿’é€²åº¦
   - [ ] æ¨è–¦å¾…å®Œæˆé …ç›®
   - [ ] å­¸ç¿’æ™‚é–“çµ±è¨ˆ

## ğŸ”§ æŠ€è¡“æ£§

### æ ¸å¿ƒä¾è³´
- **Python 3.8+**
- **Selenium 4.15+** - Web è‡ªå‹•åŒ–
- **PyYAML 6.0+** - é…ç½®ç®¡ç†
- **Notion Client 2.2+** - Notion API

### å¯é¸ä¾è³´
- **SQLite** - æœ¬åœ°è³‡æ–™åº«ï¼ˆæœªä¾†ä½¿ç”¨ï¼‰
- **Rich** - çµ‚ç«¯æ©Ÿç¾åŒ–ï¼ˆå¯æ·»åŠ ï¼‰
- **Schedule** - å®šæ™‚ä»»å‹™ï¼ˆæœªä¾†ä½¿ç”¨ï¼‰

## ğŸ“ ä½¿ç”¨æµç¨‹

### 1. åˆå§‹è¨­å®š
```bash
# åŸ·è¡Œè¨­å®šè…³æœ¬
./setup_graduate_agent.sh

# æˆ–æ‰‹å‹•è¨­å®š
python -m venv .venv
source .venv/bin/activate
pip install -r requirements.txt

# è¨­å®šé…ç½®
cp graduate_agent/config/config.example.yaml graduate_agent/config/config.yaml
nano graduate_agent/config/config.yaml
```

### 2. çˆ¬å–èª²ç¨‹
```bash
python -m graduate_agent.main scrape
```

**è¼¸å‡ºï¼š** `moodle_courses.json`

### 3. ä¸‹è¼‰è³‡æº
```bash
python -m graduate_agent.main download
```

**è¼¸å‡ºï¼š** `graduate_agent/data/downloads/`

### 4. åŒæ­¥åˆ° Notion
```bash
python -m graduate_agent.main sync --parent-page-id <YOUR_PAGE_ID>
```

### 5. ä¸€éµåŸ·è¡Œå…¨éƒ¨
```bash
python -m graduate_agent.main full --parent-page-id <YOUR_PAGE_ID>
```

## ğŸ” å®‰å…¨æ€§è€ƒé‡

âœ… **å·²å¯¦æ–½ï¼š**
- ç’°å¢ƒè®Šæ•¸æ”¯æ´ï¼ˆå¯†ç¢¼ä¸å¯«å…¥é…ç½®æª”æ¡ˆï¼‰
- `.gitignore` ä¿è­·æ•æ„Ÿæª”æ¡ˆ
- é…ç½®æª”æ¡ˆé©—è­‰

âš ï¸ **å»ºè­°æ”¹é€²ï¼š**
- ä½¿ç”¨ `keyring` å¥—ä»¶å®‰å…¨å„²å­˜å¯†ç¢¼
- åŠ å¯†æœ¬åœ°å¿«å–è³‡æ–™
- å®šæœŸæ¸…ç†æ•æ„Ÿè³‡æ–™

## ğŸ› å·²çŸ¥å•é¡Œèˆ‡é™åˆ¶

1. **Selenium ä¾è³´**
   - éœ€è¦å®‰è£ ChromeDriver
   - ç‰ˆæœ¬éœ€èˆ‡ Chrome ç€è¦½å™¨åŒ¹é…

2. **ç™»å…¥æµç¨‹**
   - æ”¿å¤§ Moodle SSO ç™»å…¥æµç¨‹å¯èƒ½è®Šå‹•
   - éœ€è¦èª¿æ•´ç™»å…¥é‚è¼¯é©æ‡‰è®ŠåŒ–

3. **ä¸‹è¼‰åŠŸèƒ½**
   - éƒ¨åˆ†è³‡æºé¡å‹å¯èƒ½ç„¡æ³•è‡ªå‹•ä¸‹è¼‰
   - éœ€è¦æ‰‹å‹•è™•ç†ç‰¹æ®Šæƒ…æ³

4. **Notion API**
   - éœ€è¦æ‰‹å‹•å‰µå»º Integration
   - éœ€è¦æ‰‹å‹•åˆ†äº«é é¢æ¬Šé™

## ğŸ“ˆ æ¸¬è©¦ç‹€æ…‹

- âœ… ç›®éŒ„çµæ§‹æ¸¬è©¦
- âœ… é…ç½®æª”æ¡ˆæ¸¬è©¦
- â³ ä¾è³´å®‰è£æ¸¬è©¦ï¼ˆéœ€è¦ç’°å¢ƒï¼‰
- â³ æ¨¡çµ„å°å…¥æ¸¬è©¦ï¼ˆéœ€è¦ä¾è³´ï¼‰
- â³ ç«¯åˆ°ç«¯æ¸¬è©¦ï¼ˆéœ€è¦çœŸå¯¦å¸³è™Ÿï¼‰

## ğŸ“ ä½¿ç”¨å ´æ™¯

### å ´æ™¯ 1: æ¯é€±èª²ç¨‹åŒæ­¥
```bash
# æ¯é€±åŸ·è¡Œä¸€æ¬¡ï¼Œæ›´æ–°æ‰€æœ‰èª²ç¨‹è³‡æ–™
python -m graduate_agent.main full
```

### å ´æ™¯ 2: åªä¸‹è¼‰æ–°è³‡æº
```bash
# çˆ¬å–æœ€æ–°èª²ç¨‹çµæ§‹
python -m graduate_agent.main scrape

# ä¸‹è¼‰æ–°å¢çš„è³‡æºï¼ˆè·³éå·²å­˜åœ¨ï¼‰
python -m graduate_agent.main download --skip-existing
```

### å ´æ™¯ 3: Notion å·¥ä½œæµç¨‹
```bash
# 1. çˆ¬å–èª²ç¨‹
python -m graduate_agent.main scrape

# 2. åŒæ­¥åˆ° Notionï¼ˆä¸ä¸‹è¼‰æª”æ¡ˆï¼‰
python -m graduate_agent.main sync --parent-page-id <ID>

# 3. åœ¨ Notion ä¸­æ¨™è¨˜éœ€è¦ä¸‹è¼‰çš„è³‡æº
# 4. ç¨å¾Œæ‰¹æ¬¡ä¸‹è¼‰
python -m graduate_agent.main download
```

## ğŸ™ è‡´è¬

æœ¬å°ˆæ¡ˆåŸºæ–¼ä»¥ä¸‹å„ªç§€çš„é–‹æºå°ˆæ¡ˆï¼š
- **Selenium** - Web è‡ªå‹•åŒ–æ¡†æ¶
- **Notion SDK** - Notion API å®¢æˆ¶ç«¯
- **PyYAML** - YAML è§£æå™¨

## ğŸ“„ æˆæ¬Š

MIT License

---

**é–‹ç™¼æ—¥æœŸ**: 2025-11-18
**ç‰ˆæœ¬**: 1.0.0
**ç‹€æ…‹**: Phase 1 å®Œæˆ âœ…

**ä¸‹ä¸€å€‹é‡Œç¨‹ç¢‘**: Phase 2 - ä½œæ¥­ç®¡ç†èˆ‡ Notion é€²éšåŠŸèƒ½
